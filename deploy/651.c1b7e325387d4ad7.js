"use strict";(self.webpackChunktp02_HAMM_Benjamin=self.webpackChunktp02_HAMM_Benjamin||[]).push([[651],{651:(k,C,i)=>{i.r(C),i.d(C,{ProductModule:()=>D});var a=i(6895),p=i(3074),x=i(4004),m=i(5442),g=i(7579),M=i(4408);const y=new(i(7565).v)(M.o);var P=i(4482),Z=i(5403),A=i(1884),t=i(8274),f=i(6690),h=i(5519),u=i(4006);const $=function(n){return[n]};function J(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"a",3),t._uU(2),t.qZA(),t.TgZ(3,"button",4),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.addToCart(s))}),t._uU(4,"Add to cart"),t.qZA()()}if(2&n){const e=c.$implicit;t.MGl("routerLink","/products/",e.id,""),t.xp6(1),t.Q6J("routerLink",t.VKq(5,$,e.id)),t.xp6(1),t.lnq(" ",e.name," ",e.price," ",e.id," ")}}let v=(()=>{class n{constructor(e,o){this.productService=e,this.store=o,this.nameFilterChanged$=new g.x,this.modelsFilterChanged$=new g.x,this.modelsFilter=[],this.nameFilter="",this.filter="",this.filterProduct=r=>r.name.toLowerCase().includes(this.nameFilter.toLowerCase())}ngOnInit(){this.nameFilterChanged$.pipe(function w(n,c=y){return(0,P.e)((e,o)=>{let r=null,s=null,d=null;const T=()=>{if(r){r.unsubscribe(),r=null;const l=s;s=null,o.next(l)}};function N(){const l=d+n,F=c.now();if(F<l)return r=this.schedule(void 0,l-F),void o.add(r);T()}e.subscribe((0,Z.x)(o,l=>{s=l,d=c.now(),r||(r=c.schedule(N,n),o.add(r))},()=>{T(),o.complete()},void 0,()=>{s=r=null}))})}(300),(0,A.x)()).subscribe(()=>{this.getFilteredProducts()}),this.productList$=this.productService.getProducts(),this.products$=this.productService.getProducts()}getFilteredProducts(){this.products$=this.productService.getProducts().pipe((0,x.U)(e=>e.filter(this.filterProduct)))}addToCart(e){this.store.dispatch(new m.R(e))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.M),t.Y36(h.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-show-catalogue"]],decls:4,vars:4,consts:[["id","nameFilter","type","text","placeholder","Search !",1,"input",3,"ngModel","ngModelChange"],["class","products_card",3,"routerLink",4,"ngFor","ngForOf"],[1,"products_card",3,"routerLink"],[3,"routerLink"],[3,"click"]],template:function(e,o){1&e&&(t._UZ(0,"br"),t.TgZ(1,"input",0),t.NdJ("ngModelChange",function(s){return o.nameFilter=s})("ngModelChange",function(s){return o.nameFilterChanged$.next(s)}),t.qZA(),t.YNc(2,J,5,7,"div",1),t.ALo(3,"async")),2&e&&(t.xp6(1),t.Q6J("ngModel",o.nameFilter),t.xp6(1),t.Q6J("ngForOf",t.lcZ(3,2,o.products$)))},dependencies:[a.sg,p.rH,p.yS,u.Fj,u.JJ,u.On,a.Ov]}),n})();function O(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t._uU(1),t.TgZ(2,"button",1),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.deleteFromCart(s))}),t._uU(3,"Delete from cart"),t.qZA()()}if(2&n){const e=c.$implicit;t.xp6(1),t.lnq(" ",e.id," ",e.name," ",e.price," ")}}function L(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",1),t._uU(1),t.TgZ(2,"button",2),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.addToCart(r.product))}),t._uU(3,"Add to cart"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.lnq(" ",e.product.name," ",e.product.price," ",e.product.id," ")}}const Y=[{path:"",component:v},{path:"catalogue",component:v},{path:"cart",component:(()=>{class n{constructor(e){this.store=e,this.cart$=this.store.select(o=>o.cart.products)}ngOnInit(){}deleteFromCart(e){this.store.dispatch(new m.K(e))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-cart"]],decls:4,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1,"cart works!"),t.qZA(),t.YNc(2,O,4,3,"div",0),t.ALo(3,"async")),2&e&&(t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,1,o.cart$)))},dependencies:[a.sg,a.Ov]}),n})()},{path:":id",component:(()=>{class n{constructor(e,o,r){this.route=e,this.productService=o,this.store=r,this.id=0}ngOnInit(){this.id=Number(this.route.snapshot.paramMap.get("id")),this.productService.getProduct(this.route.snapshot.params.id).subscribe(e=>{this.product=e})}addToCart(e){this.store.dispatch(new m.R(e))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.gz),t.Y36(f.M),t.Y36(h.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-product-detail"]],decls:3,vars:1,consts:[["id","product-detail",4,"ngIf"],["id","product-detail"],[3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1,"product-detail works!"),t.qZA(),t.YNc(2,L,4,3,"div",0)),2&e&&(t.xp6(2),t.Q6J("ngIf",o.product))},dependencies:[a.O5]}),n})()}];let D=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[a.ez,p.Bz.forChild(Y),u.UX,u.u5]}),n})()}}]);